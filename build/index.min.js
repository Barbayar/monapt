var Katana;!function(a){var b=function(){function a(){}return a}();a.Left=b;var c=function(){function a(){}return a}();a.Right=c}(Katana||(Katana={}));var Katana;!function(a){var b;!function(b){var c=function(){function b(){this.table={}}return b.prototype.register=function(a,b){this.table[a]=b},b.prototype.index=function(b){return this.table[b]?new a.Some(this.table[b]):new a.None},b}();b.StringSelector=c;var d=function(){function b(){this.table={}}return b.prototype.register=function(a,b){this.table[a.hash()]=b},b.prototype.index=function(b){var c=b.hash();return this.table[c]?new a.Some(this.table[c]):new a.None},b}();b.HashableSelector=d;var e=function(){function b(){}return b.prototype.register=function(){},b.prototype.index=function(){return new a.None},b}();b.ObjectSelector=e}(b||(b={}));var c=function(){function c(a,b){for(var c=[],d=0;d<arguments.length-2;d++)c[d]=arguments[d+2];if(this.real=[],b){if(0!=c.length&&0!=c.length%2)throw new Error(c[c.length-1]+" has not value.");this.ensureSelector(a),this.add(a,b);for(var e=0,f=c.length;f>e;e+=2)this.add(c[e],c[e+1])}else if(a){var g=a;for(var h in g)this.ensureSelector(h),this.add(h,g[h])}this.ensureSelector()}return c.prototype.ensureSelector=function(a){"undefined"==typeof a&&(a=null),this.selector||(this.selector=a?"string"==typeof a?new b.StringSelector:a.hash?new b.HashableSelector:new b.ObjectSelector:new b.ObjectSelector)},c.prototype.add=function(b,c){this.real.push(a.Tuple2(b,c)),this.selector.register(b,this.real.length-1)},c.prototype.foreach=function(a){this.real.forEach(function(b){return a(b._1,b._2)})},c.prototype.filter=function(a){var b=new c;return this.foreach(function(c,d){a(c,d)&&b.add(c,d)}),b},c.prototype.reject=function(a){return this.filter(function(b,c){return!a(b,c)})},c.prototype.find=function(a){return this.filter(a).head()},c.prototype.get=function(b){var c=this;return this.selector.index(b).map(function(a){return c.real[a]._2}).orElse(function(){return c.find(function(a){return a==b}).map(function(a){return a._2}).orElse(function(){return new a.None})})},c.prototype.getOrElse=function(a,b){return this.get(a).getOrElse(b)},c.prototype.head=function(){return this.real.length>0?new a.Some(this.real[0]):new a.None},c}();a.Map=c}(Katana||(Katana={}));var Katana;!function(a){var b=function(a){return a},c=function(){function a(a){this.value=a}return a.prototype.get=function(){return this.value},a.prototype.getOrElse=function(){return this.value},a.prototype.orElse=function(){return this},a.prototype.match=function(a){a.Some&&a.Some(this.value)},a.prototype.map=function(b){return new a(b(this.get()))},a.prototype.flatMap=function(a){return a(this.get())},a.prototype.flatten=function(){if(this.value instanceof a)return b(this.value);if(this.value instanceof d)return new d;throw new Error("Cannot prove that.")},a}();a.Some=c;var d=function(){function a(){}return a.prototype.get=function(){throw new Error("No such element.")},a.prototype.getOrElse=function(a){return a()},a.prototype.orElse=function(a){return a()},a.prototype.match=function(a){a.None&&a.None()},a.prototype.map=function(){return new a},a.prototype.flatMap=function(){return new a},a.prototype.flatten=function(){return new a},a}();a.None=d}(Katana||(Katana={}));var Katana;!function(a){var b=function(a){return a},c=function(){function b(a){this.value=a,this.isSuccess=!0,this.isFailure=!1}return b.prototype.get=function(){return this.value},b.prototype.getOrElse=function(){return this.get()},b.prototype.orElse=function(){return this},b.prototype.map=function(b){var c=this;return a.Try(function(){return b(c.value)})},b.prototype.flatMap=function(a){try{return a(this.value)}catch(b){return new d(b)}},b.prototype.match=function(a){a.Success&&a.Success(this.get())},b}();a.Success=c;var d=function(){function a(a){this.error=a,this.isSuccess=!1,this.isFailure=!0}return a.prototype.get=function(){throw this.error},a.prototype.getOrElse=function(a){return a()},a.prototype.orElse=function(a){return a()},a.prototype.map=function(){return b(this)},a.prototype.flatMap=function(){return b(this)},a.prototype.match=function(a){a.Failure&&a.Failure(this.error)},a}();a.Failure=d,a.Try=function(a){try{return new c(a())}catch(b){return new d(b)}}}(Katana||(Katana={}));var Katana;!function(a){a.Tuple1=function(a){return{_1:a}},a.Tuple2=function(a,b){return{_1:a,_2:b}}}(Katana||(Katana={}));